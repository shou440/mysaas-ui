(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7f34"],{"6nOv":function(e,t,n){"use strict";var r=n("OK5F");n.n(r).a},KTTK:function(e,t,n){"use strict";function r(e,t){return("00000000000000"+e).substr(-t)}function i(){return"wx5c451c1c46ba0ff9"}function a(e){for(var t=new Object,n=location.search.substring(1).split("&"),r=0;r<n.length;r++){var i=n[r].indexOf("=");if(-1!=i){var a=n[r].substring(0,i),o=n[r].substring(i+1);o=decodeURIComponent(o),t[a]=o}}return t[e]}function o(){return"http://www.ambcharge.com"}function c(e){if(null!=e&&""!=e){var t=e.replace("T"," ");t=t.substring(0,19);var n=Date.parse(t),r=new Date;return r.setTime(n),r}return""}function s(e){var t=new Date("1970/01/01 00:00:00").getTime();return new Date(t+1e3*e)}function u(e,t){return e.getMonth()+1+"月"+e.getDate()+"号 至 "+(t.getMonth()+1)+"月"+t.getDate()+"号"}function d(e){var t=(e.getMonth()+1)%12;return e.getFullYear()+"-"+r(t,2)+"-"+r(e.getDate(),2)+" "+r(e.getHours(),2)+":"+r(e.getMinutes(),2)+":"+r(e.getSeconds(),2)}function f(){var e="0123456789abcdef".length;return"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx".replace(/x/g,function(t){return"0123456789abcdef".charAt(Math.floor(Math.random()*e))})}function p(e){var t=new Date,n=e,r=n.getHours(),i=-t.getTimezoneOffset()/60;return i<0?(i=Math.abs(i)+8,n.setHours(r+i)):(i-=8,n.setHours(r-i)),n}function l(){var e=new Date,t=new Date,n=t.getHours(),r=-e.getTimezoneOffset()/60;return r<0?(r=Math.abs(r)+8,t.setHours(n+r)):(r-=8,t.setHours(n-r)),t}function g(){var e=new Date,t=new Date,n=t.getHours(),r=-e.getTimezoneOffset()/60;r<0?(r=Math.abs(r)+8,t.setHours(n+r)):(r-=8,t.setHours(n-r));var i=t.getTime()/1e3,a=new Date("1970/01/01 00:00:00").getTime()/1e3;return i<a?0:Math.floor(i-a)}n.d(t,"d",function(){return r}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"i",function(){return c}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return u}),n.d(t,"k",function(){return d}),n.d(t,"l",function(){return f}),n.d(t,"j",function(){return p}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return g})},OK5F:function(e,t,n){},"YMF+":function(e,t,n){"use strict";n.r(t);var r=n("Asgo"),i=n.n(r),a=n("KTTK"),o=n("Ux+J"),c=(n("LKdb"),{name:"addroom",data:function(){return{wxparam:{ret:0,url:"",fun:"",param:"",code:"",state:"",iscallback:!1,isfailed:!1,errmsg:""},orderinfo:{appid:"",mch_id:"",nonce_str:"",prepay_id:"",sign:""},tip:"扫码验证中...",loading:null}},methods:{testPay:function(){var e=this,t={openid:"oRvGF1YWJSGup8qiY27js5BbOf70",paymentid:Object(a.h)()+"11",message:"testpay",fFee:1};new i.a(function(){Object(o.a)(t).then(function(t){e.orderinfo=t.data.data,e.orderinfo}).catch(function(e){})})},callPay:function(){"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",onBridgeReady,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",onBridgeReady),document.attachEvent("onWeixinJSBridgeReady",onBridgeReady)):this.onBridgeReady()},onBridgeReady:function(){var e=this;Object(a.h)(),e.orderinfo.packages;WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.orderinfo.appId,timeStamp:e.orderinfo.timeStamp,nonceStr:e.orderinfo.nonceStr,package:e.orderinfo.package,signType:"MD5",paySign:e.orderinfo.paySign},function(t){""!=t.errMsg&&(e.wxparam.ret=2,e.errmsg=t.errMsg)})},parse:function(){var e=this,t=this,n=Object(a.a)("fun"),r=Object(a.a)("code");if(null!=n){var i=n+(u=Object(a.a)("param"));this.tip="扫码验证中...";var o=encodeURIComponent(Object(a.b)()+"/myweixin"),c="https://open.weixin.qq.com/connect/oauth2/authorize?",s="appid="+Object(a.c)()+"&";s=s+"redirect_uri="+o+"&",s+="response_type=code&",c+=s=(s+="scope=snsapi_userinfo&")+"state="+i+"#wechat_redirect",this.wxparam.url=location.href,this.wxparam.fun=n,this.wxparam.param=u,location.href=c}else if(null!=r){this.tip="验证登录...";i=Object(a.a)("state");if(this.wxparam.iscallback=!0,this.wxparam.code=r,this.wxparam.state=i,null!=t.wxparam.state&&t.wxparam.state.length>=2){var u,d=t.wxparam.state.slice(0,2),f={code:r,param:u=t.wxparam.state.slice(2,t.wxparam.state.length)},p=null;t.$store.dispatch("FetchWXUserInfoByCode",f).then(function(n){return null==n?(t.tip="扫码验证失败,请重新扫码！",void t.loading.close()):null==(p=JSON.parse(n))?(t.tip="获取用户微信信息失败!",void t.loading.close()):0==p.subscribe?(t.tip="未关注公众号，请先关注公众号再操作！",window.location="https://mp.weixin.qq.com/s/HvaBTWtba54z_Z1nM5LTpw",void t.loading.close()):(t.$store.commit("SET_PREWXUSER",p),t.tip="扫码验证成功!",void("fu"==d&&""==u||"pm"==d&&null!=u&&""!=u&&e.proccessPreScan(u)))}).catch(function(e){t.wxparam.ret=2})}}},showLoading:function(){this.loading=this.$loading({lock:!0,text:this.tip,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"})},hideLoading:function(){loading()},proccessPreScan:function(e){var t=this;t.$store.dispatch("GetPreMeterByID",e).then(function(e){if(null==e)return t.tip="获取电表失败！",void t.loading.close();t.tip="获取电表信息成功",t.loading.close();var n=t.$store.state.user.prewxuser;null==e.owner_openid||""==e.owner_openid?t.$router.push("/regpremeter"):(n.openid,e.owner_openid,t.$router.push("/premetercharge"))}).catch(function(e){t.wxparam.ret=2})}},mounted:function(){var e=this;this.$nextTick(function(){e.showLoading(),e.parse()})}}),s=(n("6nOv"),n("ZrdR")),u=Object(s.a)(c,function(){var e=this.$createElement;return(this._self._c||e)("div")},[],!1,null,"20d52184",null);u.options.__file="index.vue";t.default=u.exports}}]);